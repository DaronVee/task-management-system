(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3888:function(e,t,s){Promise.resolve().then(s.bind(s,2043))},2043:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var a=s(7437),r=s(2265);function n(e){let{stats:t,className:s=""}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"stat-card stat-card--success",children:[(0,a.jsx)("div",{className:"stat-value",children:t.completedTasks}),(0,a.jsx)("div",{className:"stat-label",children:"Tasks Completed"})]}),(0,a.jsxs)("div",{className:"stat-card stat-card--primary",children:[(0,a.jsx)("div",{className:"stat-value",children:t.inProgressTasks}),(0,a.jsx)("div",{className:"stat-label",children:"In Progress"})]}),(0,a.jsxs)("div",{className:"stat-card stat-card--neutral",children:[(0,a.jsxs)("div",{className:"stat-value",children:[t.estimatedHours,(0,a.jsx)("span",{className:"stat-unit",children:"h"})]}),(0,a.jsx)("div",{className:"stat-label",children:"Time Estimated"})]}),(0,a.jsxs)("div",{className:"stat-card stat-card--warning",children:[(0,a.jsxs)("div",{className:"stat-value",children:[t.completionPercentage,(0,a.jsx)("span",{className:"stat-unit",children:"%"})]}),(0,a.jsx)("div",{className:"stat-label",children:"Progress Made"})]})]})}let i=r.memo(function(e){let{stats:t,selectedDate:s,onDateChange:r,onRefresh:i,onCreateTask:l,className:o=""}=e;return(0,a.jsxs)("header",{className:"card card-elevated dashboard-header ".concat(o),style:{marginBottom:"var(--space-8)",padding:"var(--space-8)"},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",style:{marginBottom:"var(--space-8)"},children:[(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-2)"},children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsx)("h1",{style:{fontSize:"var(--text-4xl)",fontWeight:"var(--font-weight-bold)",background:"var(--gradient-brand)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},children:"Today's Mission"})}),(0,a.jsxs)("p",{style:{fontSize:"var(--text-xl)",color:"var(--text-secondary)",lineHeight:"var(--line-height-relaxed)"},children:[(0,a.jsx)("span",{style:{fontWeight:"var(--font-weight-semibold)",color:"var(--text-primary)"},children:t.completedTasks})," of"," ",(0,a.jsx)("span",{style:{fontWeight:"var(--font-weight-semibold)",color:"var(--text-primary)"},children:t.totalTasks})," tasks completed •"," ",(0,a.jsxs)("span",{style:{fontWeight:"var(--font-weight-semibold)",color:"var(--success-600)"},children:[t.completionPercentage,"%"]})," complete"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4 header-controls",children:[l&&(0,a.jsxs)("button",{onClick:l,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"var(--space-2)"},"aria-label":"Create new task",children:[(0,a.jsx)("span",{style:{fontSize:"var(--text-lg)"},children:"+"}),"New Task"]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("label",{htmlFor:"date-picker",className:"sr-only",children:"Select date"}),(0,a.jsx)("input",{id:"date-picker",type:"date",value:s,onChange:e=>r(e.target.value),className:"input",style:{width:"auto"},"aria-label":"Date selection"}),(0,a.jsx)("button",{className:"btn btn-secondary btn-sm",onClick:i,"aria-label":"Refresh dashboard",children:"Refresh"})]})]})]}),(0,a.jsx)("div",{className:"stats-grid",children:(0,a.jsx)(n,{stats:t})})]})});var l=s(9501),o=s(3590),c=s(7119),d=s(1994);function u(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,d.W)(t)}var m=s(7165),g=s(1601),p=s(3836);let x=c.Ry({title:c.Z_().min(1,"Title is required").max(200,"Title too long"),description:c.Z_().max(1e3,"Description too long").optional(),priority:c.Km(["P1","P2","P3"]),category:c.Km(["development","design","admin","learning","personal","meeting","planning"]),estimated_minutes:c.Rx().min(5).max(480),time_block:c.Km(["morning","afternoon","evening"]),tags:c.IX(c.Z_()).optional(),success_criteria:c.Z_().max(500,"Success criteria too long").optional()}),h=[{value:"P1",label:"P1 - Critical",color:"bg-red-500"},{value:"P2",label:"P2 - Important",color:"bg-orange-500"},{value:"P3",label:"P3 - Nice to have",color:"bg-blue-500"}],b=["development","design","admin","learning","personal","meeting","planning"],y=[{value:"morning",label:"Morning (8-12 AM)"},{value:"afternoon",label:"Afternoon (1-5 PM)"},{value:"evening",label:"Evening (6-9 PM)"}];function f(e){let{isOpen:t,onClose:s,onSave:n,task:i,mode:c}=e,[d,f]=(0,r.useState)([]),[v,k]=(0,r.useState)(""),[j,w]=(0,r.useState)(!1),{register:N,handleSubmit:C,formState:{errors:_},reset:S,setValue:T,watch:D}=(0,l.cI)({resolver:(0,o.F)(x),defaultValues:{priority:"P2",category:"personal",estimated_minutes:30,time_block:"morning",tags:[]}});(0,r.useEffect)(()=>{i&&"edit"===c?(T("title",i.title),T("description",i.description),T("priority",i.priority),T("category",i.category),T("estimated_minutes",i.estimated_minutes),T("time_block",i.time_block||"morning"),T("tags",i.tags),T("success_criteria",i.success_criteria||""),f(i.subtasks.map(e=>({id:e.id,title:e.title,completed:e.completed})))):(S(),f([]))},[i,c,T,S]);let P=()=>{v.trim()&&(f(e=>[...e,{title:v.trim(),completed:!1}]),k(""))},E=e=>{f(t=>t.filter((t,s)=>s!==e))},M=(e,t)=>{f(s=>s.map((s,a)=>a===e?{...s,title:t}:s))},I=async e=>{w(!0);try{let t={title:e.title,description:e.description,priority:e.priority,category:e.category,estimated_minutes:e.estimated_minutes,time_block:e.time_block,tags:e.tags||[],subtasks:d.map(e=>({title:e.title,completed:e.completed||!1}))};await n(t),s(),S(),f([])}catch(e){}finally{w(!1)}},A=()=>{s(),S(),f([]),k("")};return t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"create"===c?"Create New Task":"Edit Task"}),(0,a.jsx)("button",{onClick:A,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(m.Z,{className:"w-6 h-6"})})]}),(0,a.jsxs)("form",{onSubmit:C(I),className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),(0,a.jsx)("input",{type:"text",...N("title"),className:u("w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",_.title&&"border-red-500"),placeholder:"What needs to be done?"}),_.title&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.title.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{...N("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add more details..."}),_.description&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.description.message})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),(0,a.jsx)("select",{...N("priority"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:h.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsx)("select",{...N("category"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:b.map(e=>(0,a.jsx)("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimated Time (minutes)"}),(0,a.jsx)("input",{type:"number",...N("estimated_minutes",{valueAsNumber:!0}),min:"5",max:"480",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),_.estimated_minutes&&(0,a.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.estimated_minutes.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Block"}),(0,a.jsx)("select",{...N("time_block"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:y.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Success Criteria"}),(0,a.jsx)("textarea",{...N("success_criteria"),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"How will you know this task is complete?"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subtasks"}),(0,a.jsx)("div",{className:"space-y-2 mb-3",children:d.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:e.title,onChange:e=>M(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Subtask title"}),(0,a.jsx)("button",{type:"button",onClick:()=>E(t),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(g.Z,{className:"w-5 h-5"})})]},t))}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:v,onChange:e=>k(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),P()),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Add a subtask..."}),(0,a.jsx)("button",{type:"button",onClick:P,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(0,a.jsx)(p.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,a.jsx)("button",{type:"button",onClick:A,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:j,className:u("px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",j&&"opacity-50 cursor-not-allowed"),children:j?"Saving...":"create"===c?"Create Task":"Update Task"})]})]})]})}):null}var v=s(2087);function k(e){let{onAdd:t,timeBlock:s="morning",className:n,placeholder:i="What needs to be done?"}=e,[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(""),[m,g]=(0,r.useState)(!1),[x,h]=(0,r.useState)("P2"),[b,y]=(0,r.useState)("personal"),[f,k]=(0,r.useState)(30),j=(0,r.useRef)(null),w=(0,r.useRef)(null);(0,r.useEffect)(()=>{l&&j.current&&j.current.focus()},[l]);let N=e=>{let t=e,s="P2",a="personal",r=30;Object.entries({urgent:"P1",critical:"P1",asap:"P1",important:"P2",normal:"P2",low:"P3",nice:"P3"}).forEach(a=>{let[r,n]=a;e.toLowerCase().includes(r)&&(s=n,t=t.replace(RegExp(r,"gi"),"").trim())}),Object.entries({code:"development",dev:"development",build:"development",design:"design",ui:"design",ux:"design",email:"admin",admin:"admin",call:"meeting",meeting:"meeting",learn:"learning",study:"learning",read:"learning",plan:"planning"}).forEach(t=>{let[s,r]=t;e.toLowerCase().includes(s)&&(a=r)});let n=e.match(/(\d+)\s*(min|minute|minutes|hour|hours|hr|hrs)/i);if(n){let e=parseInt(n[1]);r=n[2].toLowerCase().startsWith("h")?60*e:e,t=t.replace(n[0],"").trim()}return{title:t,priority:s,category:a,estimated_minutes:r}},C=async()=>{if(c.trim()){g(!0);try{let e=N(c),a={title:e.title||c,priority:e.priority||x,category:e.category||b,estimated_minutes:e.estimated_minutes||f,time_block:s,tags:[]};await t(a),d(""),o(!1),h("P2"),y("personal"),k(30)}catch(e){}finally{g(!1)}}},_=e=>{!w.current||w.current.contains(e.target)||c.trim()||o(!1)};return((0,r.useEffect)(()=>{if(l)return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[l,c]),l)?(0,a.jsxs)("div",{ref:w,className:u("bg-white border-2 border-blue-200 rounded-lg shadow-sm",n),children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("input",{ref:j,type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&(o(!1),d("")):(e.preventDefault(),C())},placeholder:"What needs to be done? (Try: 'urgent fix bug 2hrs' or 'design ui')",className:"w-full text-lg font-medium placeholder-gray-400 border-none outline-none resize-none",disabled:m}),c.trim()&&(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Priority:"}),(0,a.jsxs)("select",{value:x,onChange:e=>h(e.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs",children:[(0,a.jsx)("option",{value:"P1",children:"P1 - Critical"}),(0,a.jsx)("option",{value:"P2",children:"P2 - Important"}),(0,a.jsx)("option",{value:"P3",children:"P3 - Nice to have"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Category:"}),(0,a.jsxs)("select",{value:b,onChange:e=>y(e.target.value),className:"px-2 py-1 border border-gray-200 rounded text-xs",children:[(0,a.jsx)("option",{value:"development",children:"Development"}),(0,a.jsx)("option",{value:"design",children:"Design"}),(0,a.jsx)("option",{value:"admin",children:"Admin"}),(0,a.jsx)("option",{value:"learning",children:"Learning"}),(0,a.jsx)("option",{value:"personal",children:"Personal"}),(0,a.jsx)("option",{value:"meeting",children:"Meeting"}),(0,a.jsx)("option",{value:"planning",children:"Planning"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Time:"}),(0,a.jsx)("input",{type:"number",value:f,onChange:e=>k(parseInt(e.target.value)||30),min:"5",max:"480",className:"w-16 px-2 py-1 border border-gray-200 rounded text-xs"}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"min"})]})]})]}),c.trim()&&(0,a.jsxs)("div",{className:"flex items-center justify-between px-4 pb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:["Smart parsing detected: ",N(c).category,", ",N(c).priority,", ",N(c).estimated_minutes,"min"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{o(!1),d("")},className:"px-3 py-1 text-sm text-gray-600 hover:text-gray-800",disabled:m,children:"Cancel"}),(0,a.jsx)("button",{onClick:C,disabled:m||!c.trim(),className:u("px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition-colors",m&&"opacity-50 cursor-not-allowed"),children:m?"Adding...":"Add Task"})]})]})]}):(0,a.jsxs)("button",{onClick:()=>o(!0),className:u("w-full flex items-center gap-3 p-4 text-left text-gray-500 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg hover:border-gray-300 hover:bg-gray-100 transition-all duration-200 group",n),children:[(0,a.jsx)(p.Z,{className:"w-5 h-5 text-gray-400 group-hover:text-gray-600"}),(0,a.jsx)("span",{className:"group-hover:text-gray-700",children:i}),(0,a.jsx)(v.Z,{className:"w-4 h-4 ml-auto text-blue-400 opacity-0 group-hover:opacity-100 transition-opacity"})]})}var j=s(795),w=s(3662),N=s(9892);function C(e){let{priority:t,className:s=""}=e;return(0,a.jsx)("span",{className:"priority-badge priority-".concat(t.toLowerCase()," ").concat(s),children:t})}function _(e){let{status:t,className:s=""}=e,r=t.replace("_"," ");return(0,a.jsx)("span",{className:"status-badge status-".concat(t.replace("_","-")," ").concat(s),children:r})}function S(e){let{progress:t,isCompleted:s=!1,className:r=""}=e;return(0,a.jsxs)("div",{className:"progress-container ".concat(r),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"label",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm font-semibold",style:{color:"var(--text-primary)"},children:[t,"%"]})]}),(0,a.jsx)("div",{className:"progress-bar",children:(0,a.jsx)("div",{className:"progress-fill ".concat(s?"progress-fill--completed":""),style:{width:"".concat(t,"%")}})})]})}function T(e){let{tags:t,className:s=""}=e;return 0===t.length?null:(0,a.jsx)("div",{className:"flex flex-wrap gap-2 ".concat(s),children:t.map(e=>(0,a.jsxs)("span",{className:"tag",style:{background:"var(--background-tertiary)",color:"var(--text-secondary)",padding:"var(--space-1) var(--space-3)",borderRadius:"var(--radius-md)",fontSize:"var(--text-xs)",fontWeight:"var(--font-weight-medium)"},children:["#",e]},e))})}var D=s(4610),P=s(2594),E=s(9035),M=s(7233);function I(e){let{task:t,isSuggested:s=!1,onStartWorking:n,onEdit:i,onDelete:l,onToggleSubtask:o,onUpdate:c,className:d=""}=e,[m,p]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),b=async()=>{if(c&&!x){h(!0);try{let e="completed"===t.status?"not_started":"completed";await c(t.id,{status:e,progress:"completed"===e?100:0})}catch(e){}finally{h(!1)}}},y=async e=>{if(c&&!x){h(!0);try{await c(t.id,{status:e})}catch(e){}finally{h(!1)}}},f=async e=>{if(o)try{await o(t.id,e)}catch(e){}};return(0,a.jsx)("div",{className:u("card",s&&"card-suggested","completed"===t.status&&"opacity-75",d),onMouseLeave:()=>p(!1),children:(0,a.jsxs)("div",{style:{padding:"var(--space-6)"},children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(C,{priority:t.priority}),(0,a.jsx)(_,{status:t.status})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",style:{color:"var(--text-secondary)"},children:[(0,a.jsx)("span",{children:(e=>{switch(e){case"morning":return"\uD83C\uDF05";case"afternoon":return"☀️";case"evening":return"\uD83C\uDF19";default:return"⏰"}})(t.time_block||"morning")}),(0,a.jsxs)("span",{className:"font-medium",children:[t.estimated_minutes,"m"]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>p(!m),className:"p-1 rounded-md hover:bg-gray-100 transition-colors","aria-label":"Task actions",children:(0,a.jsx)(D.Z,{className:"w-4 h-4 text-gray-500"})}),m&&(0,a.jsxs)("div",{className:"absolute right-0 top-8 z-10 bg-white border border-gray-200 rounded-md shadow-lg py-1 min-w-[120px]",children:[(0,a.jsxs)("button",{onClick:()=>{null==i||i(t),p(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50",children:[(0,a.jsx)(P.Z,{className:"w-4 h-4"}),"Edit"]}),(0,a.jsx)("button",{onClick:b,disabled:x,className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:"completed"===t.status?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(E.Z,{className:"w-4 h-4"}),"Mark Incomplete"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M.Z,{className:"w-4 h-4"}),"Mark Complete"]})}),(0,a.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,a.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to delete this task?")&&(null==l||l(t.id)),p(!1)},className:"flex items-center gap-2 w-full px-3 py-2 text-sm text-red-600 hover:bg-red-50",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4"}),"Delete"]})]})]})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h3",{className:"task-title ".concat("completed"===t.status?"task-title--completed":""),children:t.title}),(0,a.jsx)("p",{className:"task-description",children:t.description})]}),t.progress>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(S,{progress:t.progress,isCompleted:"completed"===t.status})}),t.subtasks&&t.subtasks.length>0&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("div",{className:"space-y-2",children:t.subtasks.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("button",{onClick:()=>f(e.id),className:u("flex-shrink-0 w-4 h-4 rounded border-2 transition-all",e.completed?"bg-blue-500 border-blue-500 text-white":"border-gray-300 hover:border-blue-400"),children:e.completed&&(0,a.jsx)(M.Z,{className:"w-3 h-3"})}),(0,a.jsx)("span",{className:u("transition-all",e.completed?"text-gray-500 line-through":"text-gray-700"),children:e.title})]},e.id))})}),(0,a.jsx)(T,{tags:t.tags,className:"mb-4"}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-4",style:{borderTop:"1px solid var(--border-primary)"},children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("select",{value:t.status,onChange:e=>y(e.target.value),disabled:x,className:"text-xs px-2 py-1 border border-gray-200 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,a.jsx)("option",{value:"not_started",children:"Not Started"}),(0,a.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"blocked",children:"Blocked"}),(0,a.jsx)("option",{value:"cancelled",children:"Cancelled"})]})}),(s||"not_started"===t.status)&&(0,a.jsx)("button",{className:"btn btn-primary text-sm px-3 py-1",onClick:()=>{n&&"completed"!==t.status&&n(t.id)},disabled:"completed"===t.status,children:"in_progress"===t.status?"⏸️ Continue":"⚡ Start"})]})]})})}function A(e){let{task:t,onStartWorking:s,onEdit:r,onDelete:n,onToggleSubtask:i,onUpdate:l,isDragOverlay:o=!1}=e,{attributes:c,listeners:d,setNodeRef:u,transform:m,transition:g,isDragging:p}=(0,w.nB)({id:t.id,data:{type:"task",task:t}}),x={transform:N.ux.Transform.toString(m),transition:g,opacity:p?.5:1,cursor:o?"grabbing":"grab"};return(0,a.jsx)("div",{ref:u,style:x,...c,...d,className:o?"z-50":"",children:(0,a.jsx)(I,{task:t,onStartWorking:s,onEdit:r,onDelete:n,onToggleSubtask:i,onUpdate:l,className:p?"shadow-lg scale-105":""})})}let Z={morning:"linear-gradient(135deg, var(--warning-400), var(--warning-500))",afternoon:"linear-gradient(135deg, var(--brand-primary-400), var(--brand-primary-500))",evening:"linear-gradient(135deg, var(--neutral-600), var(--neutral-700))"};function F(e){let{title:t,icon:s,timeRange:r,timeBlock:n,tasks:i,isCurrent:l=!1,onStartWorking:o,onEditTask:c,onDeleteTask:d,onToggleSubtask:m,onUpdateTask:g,quickAddComponent:p,className:x=""}=e,{isOver:h,setNodeRef:b}=(0,j.Zj)({id:n,data:{type:"timeBlock",timeBlock:n}}),y=i.length,f=i.map(e=>e.id);return(0,a.jsxs)("section",{ref:b,className:u("card transition-all duration-200",h&&"ring-2 ring-blue-400 ring-opacity-50 bg-blue-50",x),style:{padding:"var(--space-8)"},"aria-labelledby":"".concat(n,"-heading"),children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",style:{marginBottom:"var(--space-6)"},children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"time-block-icon",style:{width:"var(--space-10)",height:"var(--space-10)",background:Z[n],borderRadius:"var(--radius-xl)",display:"flex",alignItems:"center",justifyContent:"center"},"aria-hidden":"true",children:(0,a.jsx)("span",{style:{fontSize:"var(--text-2xl)"},children:s})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{id:"".concat(n,"-heading"),style:{fontSize:"var(--text-2xl)",fontWeight:"var(--font-weight-bold)",color:"var(--text-primary)"},children:t}),(0,a.jsxs)("p",{style:{color:"var(--text-secondary)"},children:[r," • ",y," task",1!==y?"s":""]})]})]}),l&&(0,a.jsx)("div",{className:"current-indicator",style:{fontSize:"var(--text-sm)",color:"var(--text-tertiary)",fontWeight:"var(--font-weight-medium)"},"aria-label":"Current time block",children:"Current"})]}),(0,a.jsx)("div",{style:{marginBottom:"var(--space-6)"},children:p}),h&&0===y&&(0,a.jsxs)("div",{className:"border-2 border-dashed border-blue-400 rounded-lg p-8 mb-6 bg-blue-50 text-center",children:[(0,a.jsx)("div",{className:"text-blue-600 text-lg mb-2",children:"Drop task here"}),(0,a.jsxs)("div",{className:"text-blue-500 text-sm",children:["Move this task to ",t.toLowerCase()]})]}),0!==y||h?(0,a.jsx)(w.Fo,{items:f,strategy:w.qw,children:(0,a.jsx)("div",{className:u("task-grid transition-all duration-200",h&&"p-2 border-2 border-dashed border-blue-300 rounded-lg bg-blue-25"),style:{display:"grid",gap:"var(--space-6)",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, 350px), 1fr))"},role:"list","aria-label":"".concat(t," tasks"),children:i.map(e=>(0,a.jsx)("div",{role:"listitem",children:(0,a.jsx)(A,{task:e,onStartWorking:o,onEdit:c,onDelete:d,onToggleSubtask:m,onUpdate:g})},e.id))})}):(0,a.jsxs)("div",{className:"empty-state",style:{textAlign:"center",padding:"var(--space-12) 0",color:"var(--text-tertiary)"},role:"status","aria-live":"polite",children:[(0,a.jsx)("span",{style:{fontSize:"var(--text-4xl)",marginBottom:"var(--space-4)",display:"block"},children:s}),(0,a.jsxs)("p",{style:{fontSize:"var(--text-lg)",fontWeight:"var(--font-weight-medium)",marginBottom:"var(--space-2)"},children:["No tasks scheduled for ",t.toLowerCase()]}),(0,a.jsx)("p",{style:{fontSize:"var(--text-sm)"},children:"evening"===n?"Perfect time for reflection and planning tomorrow":"Add tasks to get started with your productivity"})]})]})}var W=s(3887);let B="https://tvudlwfzaeecaxawgctl.supabase.co",R="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR2dWRsd2Z6YWVlY2F4YXdnY3RsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkxMDA0OTQsImV4cCI6MjA3NDY3NjQ5NH0.ZbbrwDC30UbgvJARIs1NfXscXxsuTQY0znMsM82IAQQ";if(!B||!R)throw Error("Missing Supabase environment variables");let z=(0,W.eI)(B,R,{realtime:{params:{eventsPerSecond:10}}});var L=s(3281);class O{generateId(){return"task_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}generateSubtaskId(){return"subtask_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}async getTodayTasks(){let e=(0,L.Z)(new Date,"yyyy-MM-dd"),{data:t,error:s}=await z.from("daily_tasks").select("tasks").eq("date",e).single();if(s){if("PGRST116"===s.code)return[];throw Error("Failed to fetch tasks: ".concat(s.message))}return(null==t?void 0:t.tasks)||[]}async createTask(e){var t;let s=(0,L.Z)(new Date,"yyyy-MM-dd"),a=new Date().toISOString(),r={id:this.generateId(),title:e.title,description:e.description||"",priority:e.priority||"P2",status:"not_started",progress:0,category:e.category||"personal",estimated_minutes:e.estimated_minutes||30,actual_minutes:0,time_block:e.time_block||"morning",subtasks:(null===(t=e.subtasks)||void 0===t?void 0:t.map(e=>({id:this.generateSubtaskId(),title:e.title,completed:!1,notes:e.notes})))||[],notes:[],success_criteria:e.success_criteria||"",dependencies:[],tags:e.tags||[],created_at:a,updated_at:a},n=[...await this.getTodayTasks(),r],{error:i}=await z.from("daily_tasks").upsert({date:s,tasks:n,updated_at:a});if(i)throw Error("Failed to create task: ".concat(i.message));return r}async updateTask(e,t){let s=(0,L.Z)(new Date,"yyyy-MM-dd"),a=new Date().toISOString(),r=await this.getTodayTasks(),n=r.findIndex(t=>t.id===e);if(-1===n)throw Error("Task not found");let i={...r[n],...t,updated_at:a,..."completed"!==t.status||r[n].completed_at?{}:{completed_at:a}},l=[...r];l[n]=i;let{error:o}=await z.from("daily_tasks").upsert({date:s,tasks:l,updated_at:a});if(o)throw Error("Failed to update task: ".concat(o.message));return i}async deleteTask(e){let t=(0,L.Z)(new Date,"yyyy-MM-dd"),s=new Date().toISOString(),a=(await this.getTodayTasks()).filter(t=>t.id!==e),{error:r}=await z.from("daily_tasks").upsert({date:t,tasks:a,updated_at:s});if(r)throw Error("Failed to delete task: ".concat(r.message))}async toggleSubtask(e,t){let s=(0,L.Z)(new Date,"yyyy-MM-dd"),a=new Date().toISOString(),r=await this.getTodayTasks(),n=r.findIndex(t=>t.id===e);if(-1===n)throw Error("Task not found");let i=r[n],l=i.subtasks.findIndex(e=>e.id===t);if(-1===l)throw Error("Subtask not found");let o=[...i.subtasks];o[l]={...o[l],completed:!o[l].completed};let c=o.filter(e=>e.completed).length,d=o.length>0?Math.round(c/o.length*100):i.progress,u={...i,subtasks:o,progress:d,updated_at:a},m=[...r];m[n]=u;let{error:g}=await z.from("daily_tasks").upsert({date:s,tasks:m,updated_at:a});if(g)throw Error("Failed to toggle subtask: ".concat(g.message));return u}async addSubtask(e,t){let s=(0,L.Z)(new Date,"yyyy-MM-dd"),a=new Date().toISOString(),r=await this.getTodayTasks(),n=r.findIndex(t=>t.id===e);if(-1===n)throw Error("Task not found");let i=r[n],l={id:this.generateSubtaskId(),title:t,completed:!1},o={...i,subtasks:[...i.subtasks,l],updated_at:a},c=[...r];c[n]=o;let{error:d}=await z.from("daily_tasks").upsert({date:s,tasks:c,updated_at:a});if(d)throw Error("Failed to add subtask: ".concat(d.message));return o}async bulkUpdateTasks(e,t){let s=(0,L.Z)(new Date,"yyyy-MM-dd"),a=new Date().toISOString(),r=(await this.getTodayTasks()).map(s=>e.includes(s.id)?{...s,...t,updated_at:a,..."completed"!==t.status||s.completed_at?{}:{completed_at:a}}:s),{error:n}=await z.from("daily_tasks").upsert({date:s,tasks:r,updated_at:a});if(n)throw Error("Failed to bulk update tasks: ".concat(n.message));return r.filter(t=>e.includes(t.id))}subscribeToTasks(e){let t=(0,L.Z)(new Date,"yyyy-MM-dd"),s=z.channel("daily_tasks_changes").on("postgres_changes",{event:"*",schema:"public",table:"daily_tasks",filter:"date=eq.".concat(t)},t=>{t.new&&"tasks"in t.new&&e(t.new.tasks)}).subscribe();return()=>{s.unsubscribe()}}}let U=new O;function H(){let{tasks:e,isLoading:t,error:s,createTask:n,updateTask:l,deleteTask:o,toggleSubtask:c,addSubtask:d,refreshTasks:u}=function(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),l=(0,r.useCallback)(async()=>{try{a(!0),i(null);let e=await U.getTodayTasks();t(e)}catch(e){i(e instanceof Error?e.message:"Failed to load tasks")}finally{a(!1)}},[]);(0,r.useEffect)(()=>(l(),U.subscribeToTasks(e=>{t(e)})),[l]);let o=(0,r.useCallback)(async e=>{try{i(null);let s=await U.createTask(e);t(e=>[...e,s])}catch(e){throw i(e instanceof Error?e.message:"Failed to create task"),e}},[]),c=(0,r.useCallback)(async(e,s)=>{try{i(null);let a=await U.updateTask(e,s);t(t=>t.map(t=>t.id===e?a:t))}catch(e){throw i(e instanceof Error?e.message:"Failed to update task"),e}},[]),d=(0,r.useCallback)(async e=>{try{i(null),await U.deleteTask(e),t(t=>t.filter(t=>t.id!==e))}catch(e){throw i(e instanceof Error?e.message:"Failed to delete task"),e}},[]),u=(0,r.useCallback)(async(e,s)=>{try{i(null);let a=await U.toggleSubtask(e,s);t(t=>t.map(t=>t.id===e?a:t))}catch(e){throw i(e instanceof Error?e.message:"Failed to toggle subtask"),e}},[]);return{tasks:e,isLoading:s,error:n,createTask:o,updateTask:c,deleteTask:d,toggleSubtask:u,addSubtask:(0,r.useCallback)(async(e,s)=>{try{i(null);let a=await U.addSubtask(e,s);t(t=>t.map(t=>t.id===e?a:t))}catch(e){throw i(e instanceof Error?e.message:"Failed to add subtask"),e}},[]),bulkUpdateTasks:(0,r.useCallback)(async(e,s)=>{try{i(null);let a=await U.bulkUpdateTasks(e,s);t(e=>e.map(e=>a.find(t=>t.id===e.id)||e))}catch(e){throw i(e instanceof Error?e.message:"Failed to bulk update tasks"),e}},[]),refreshTasks:(0,r.useCallback)(async()=>{await l()},[l])}}(),[m,g]=(0,r.useState)(new Date().toISOString().split("T")[0]),[p,x]=(0,r.useState)(!1),[h,b]=(0,r.useState)(null),[y,v]=(0,r.useState)(null),w=(0,j.Dy)((0,j.VT)(j.we,{activationConstraint:{distance:8}})),N=(0,r.useMemo)(()=>{let t=e.filter(e=>"completed"===e.status).length,s=e.filter(e=>"in_progress"===e.status).length,a=e.reduce((e,t)=>e+t.estimated_minutes,0);return{totalTasks:e.length,completedTasks:t,inProgressTasks:s,estimatedHours:Math.round(a/60),completionPercentage:e.length>0?Math.round(t/e.length*100):0}},[e]);(0,r.useCallback)(()=>{let e=new Date().getHours();return e<12?"Morning Focus":e<17?"Afternoon Deep Work":"Evening Review"},[]);let C=(0,r.useCallback)(()=>{let e=new Date().getHours();return e<12?"morning":e<17?"afternoon":"evening"},[]);(0,r.useCallback)(t=>e.filter(e=>e.time_block===t),[e]);let _=(0,r.useMemo)(()=>({morning:e.filter(e=>"morning"===e.time_block),afternoon:e.filter(e=>"afternoon"===e.time_block),evening:e.filter(e=>"evening"===e.time_block)}),[e]),S=(0,r.useCallback)(async e=>{try{await l(e,{status:"in_progress"})}catch(e){}},[l]),T=(0,r.useCallback)(async e=>{try{await n(e),x(!1)}catch(e){}},[n]),D=(0,r.useCallback)(e=>{b(e),x(!0)},[]),P=(0,r.useCallback)(async e=>{if(h)try{await l(h.id,{title:e.title,description:e.description,priority:e.priority,category:e.category,estimated_minutes:e.estimated_minutes,time_block:e.time_block,tags:e.tags,success_criteria:e.success_criteria}),x(!1),b(null)}catch(e){}},[h,l]),E=(0,r.useCallback)(async e=>{if(window.confirm("Are you sure you want to delete this task?"))try{await o(e)}catch(e){}},[o]),M=(0,r.useCallback)(e=>{v(e.active.id)},[]),I=(0,r.useCallback)(async t=>{var s;let{active:a,over:r}=t;if(v(null),!r)return;let n=a.id;r.id;let i=e.find(e=>e.id===n);if(i&&(null===(s=r.data.current)||void 0===s?void 0:s.type)==="timeBlock"){let e=r.data.current.timeBlock;if(i.time_block!==e)try{await l(n,{time_block:e})}catch(e){}}},[e,l]),Z=(0,r.useCallback)(()=>{v(null)},[]),W=y?e.find(e=>e.id===y):null,B=(0,r.useCallback)(()=>{u()},[u]),R=(0,r.useCallback)(e=>{g(e)},[]);return t?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your tasks..."})]})}):s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-red-600 mb-4",children:(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.232 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Tasks"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:s}),(0,a.jsx)("button",{onClick:B,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Try Again"})]})}):(0,a.jsxs)(j.LB,{sensors:w,collisionDetection:j.pE,onDragStart:M,onDragEnd:I,onDragCancel:Z,children:[(0,a.jsx)("div",{style:{minHeight:"100vh"},children:(0,a.jsxs)("div",{style:{maxWidth:"90rem",margin:"0 auto",padding:"var(--space-6) var(--space-6) var(--space-8)"},children:[(0,a.jsx)(i,{stats:N,selectedDate:m,onDateChange:R,onRefresh:B,onCreateTask:()=>{b(null),x(!0)}}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"var(--space-8)"},children:[(0,a.jsx)(F,{title:"Morning Focus",icon:"\uD83C\uDF05",timeRange:"9:00 AM - 12:00 PM",timeBlock:"morning",tasks:_.morning,isCurrent:"morning"===C(),onStartWorking:S,onEditTask:D,onDeleteTask:E,onToggleSubtask:c,onUpdateTask:l,quickAddComponent:(0,a.jsx)(k,{onAdd:n,timeBlock:"morning",placeholder:"Add a morning task..."})}),(0,a.jsx)(F,{title:"Afternoon Deep Work",icon:"☀️",timeRange:"1:00 PM - 5:00 PM",timeBlock:"afternoon",tasks:_.afternoon,isCurrent:"afternoon"===C(),onStartWorking:S,onEditTask:D,onDeleteTask:E,onToggleSubtask:c,onUpdateTask:l,quickAddComponent:(0,a.jsx)(k,{onAdd:n,timeBlock:"afternoon",placeholder:"Add an afternoon task..."})}),(0,a.jsx)(F,{title:"Evening Review",icon:"\uD83C\uDF19",timeRange:"6:00 PM - 8:00 PM",timeBlock:"evening",tasks:_.evening,isCurrent:"evening"===C(),onStartWorking:S,onEditTask:D,onDeleteTask:E,onToggleSubtask:c,onUpdateTask:l,quickAddComponent:(0,a.jsx)(k,{onAdd:n,timeBlock:"evening",placeholder:"Add an evening task..."})})]}),(0,a.jsx)(f,{isOpen:p,onClose:()=>{x(!1),b(null)},onSave:h?P:T,task:h,mode:h?"edit":"create"})]})}),(0,a.jsx)(j.y9,{children:W?(0,a.jsx)(A,{task:W,isDragOverlay:!0}):null})]})}}},function(e){e.O(0,[313,971,117,744],function(){return e(e.s=3888)}),_N_E=e.O()}]);